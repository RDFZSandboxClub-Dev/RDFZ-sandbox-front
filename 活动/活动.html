<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RDFZ沙盒社 - 活动中心</title>
    <!-- 引入外部资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 自定义Tailwind配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#16A34A',    // 主色调：绿色
                        secondary: '#0891B2',  // 辅助色：蓝色
                        accent: '#F59E0B',     // 强调色：橙色
                        dark: '#1E293B',       // 深色
                        light: '#F8FAFC',      // 浅色
                        white: '#FFFFFF'       // 白色
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                        minecraft: ['Minecraft', 'sans-serif']
                    },
                    boxShadow: {
                        'subtle': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                        'card': '0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02)',
                        'card-hover': '0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02)'
                    }
                },
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .bg-pattern {
                background-image: radial-gradient(rgba(22, 163, 74, 0.05) 1px, transparent 1px);
                background-size: 30px 30px;
            }
            /* 移动端菜单样式 */
            .mobile-menu-active {
                display: flex !important;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: white;
                padding: 1rem;
                margin-top: 0.25rem;
                border-radius: 0 0 0.5rem 0.5rem;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
                z-index: 50;
            }
            
            /* 移动端菜单中的按钮对齐样式 */
            .mobile-menu-active a {
                display: flex !important;
                align-items: center !important;
                justify-content: flex-start !important;
                padding: 0.75rem 1rem !important;
                margin: 0.25rem 0 !important;
                border-radius: 0.5rem !important;
                transition: all 0.3s ease;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            
            .mobile-menu-active a i {
                margin-right: 0.75rem !important;
                width: 20px !important;
                text-align: center !important;
                flex-shrink: 0 !important;
            }
            
            /* 确保移动端菜单中的所有按钮样式一致 */
            .mobile-menu-active .btn-hover {
                transform: none !important;
                box-shadow: none !important;
            }
            
            .mobile-menu-active .btn-hover:hover {
                transform: none !important;
                box-shadow: none !important;
                background-color: rgba(22, 163, 74, 0.1) !important;
            }
            
            /* 活动卡片样式 */
            .activity-card {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .activity-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
            }
            
            /* 活动状态标签样式 */
            .status-badge {
                display: inline-flex;
                align-items: center;
                padding: 0.25rem 0.75rem;
                border-radius: 9999px;
                font-size: 0.75rem;
                font-weight: 600;
            }
            
            .status-upcoming {
                background-color: rgba(34, 197, 94, 0.1);
                color: #16a34a;
            }
            
            .status-ongoing {
                background-color: rgba(59, 130, 246, 0.1);
                color: #2563eb;
            }
            
            .status-completed {
                background-color: rgba(107, 114, 128, 0.1);
                color: #4b5563;
            }
            
            .status-cancelled {
                background-color: rgba(239, 68, 68, 0.1);
                color: #dc2626;
            }
            
            /* 活动详情模态框样式 */
            .modal {
                display: none;
                position: fixed;
                z-index: 100;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                overflow-y: auto;
            }
            
            .modal.active {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* 活动报名表单样式 */
            .form-input {
                transition: all 0.3s ease;
            }
            
            .form-input:focus {
                border-color: #16a34a;
                box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
            }
            
            /* 活动签到按钮样式 */
            .checkin-button {
                transition: all 0.3s ease;
            }
            
            .checkin-button:hover {
                transform: scale(1.05);
            }
            
            /* 活动评价表单样式 */
            .rating-star {
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .rating-star:hover,
            .rating-star.active {
                color: #f59e0b;
            }
        }
    </style>
    
    <style>
        /* 添加现代字体和基础样式 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: #FFFFFF;
            scroll-behavior: smooth;
        }
        
        /* 平滑过渡动画 */
        .btn-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
        }
        
        /* Logo悬停效果 */
        .logo-container {
            position: relative;
            display: inline-block;
            transition: transform 0.3s ease;
        }
        
        .logo-container:hover {
            transform: scale(1.05);
        }
        
        /* 导航栏滚动效果 */
        .navbar {
            transition: all 0.3s ease;
        }
        
        .navbar.scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        
        /* 动画效果 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .animate-delay-100 {
            animation-delay: 0.1s;
        }
        
        .animate-delay-200 {
            animation-delay: 0.2s;
        }
        
        .animate-delay-300 {
            animation-delay: 0.3s;
        }
        
        .animate-delay-400 {
            animation-delay: 0.4s;
        }
        
        /* 卡片悬停效果 */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #16A34A;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #15803D;
        }
        
        /* 用户信息悬停效果 */
        .user-info {
            transition: all 0.3s ease;
        }
        
        .user-info:hover {
            transform: scale(1.05);
        }
        
        /* 积分样式 */
        .points-badge {
            background: linear-gradient(135deg, #F59E0B, #F97316);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        /* 筛选标签样式 */
        .filter-tag {
            transition: all 0.3s ease;
        }
        
        .filter-tag:hover {
            transform: translateY(-2px);
        }
        
        .filter-tag.active {
            background-color: #16a34a;
            color: white;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-white">
    <!-- 顶部导航栏 -->
    <header class="navbar bg-white text-dark shadow-subtle fixed w-full z-50">
        <div class="container mx-auto px-4 py-4">
            <nav class="flex justify-between items-center">
                <!-- 左侧Logo和名称 -->
                <div class="flex items-center gap-3">
                    <div class="logo-container">
                        <img src="data:image/png;base64,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" alt="RDFZ沙盒社Logo" class="h-10 w-10">
                    </div>
                    <span class="text-xl font-semibold tracking-wide">SandBox 沙盒社</span>
                </div>
                
                <!-- 中间导航按钮 -->
                <div id="navLinks" class="hidden md:flex items-center space-x-6">
                    <a href="../论坛/forum.html" class="btn-hover text-dark hover:text-primary font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-comments-o mr-2" aria-hidden="true"></i>论坛
                    </a>
                    <a href="index.html" class="btn-hover text-primary font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-calendar mr-2" aria-hidden="true"></i>活动
                    </a>
                    <a href="../注册与登录/登录.html" class="btn-hover bg-primary hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-user-o mr-2" aria-hidden="true"></i>登录
                    </a>
                    <a href="../注册与登录/用户信息.html" class="btn-hover bg-white hover:bg-gray-50 text-primary font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-user mr-2" aria-hidden="true"></i>个人信息
                    </a>
                </div>
                
                <!-- 右侧用户信息 -->
                <div class="hidden md:flex items-center space-x-4">
                    <!-- 用户头像 -->
                    <div class="user-info cursor-pointer">
                        <img src="https://picsum.photos/seed/user123/40/40.jpg" alt="用户头像" class="h-10 w-10 rounded-full border-2 border-gray-200">
                    </div>
                    
                    <!-- 用户昵称 -->
                    <div class="user-info">
                        <span class="text-dark font-medium">沙盒玩家</span>
                    </div>
                    
                    <!-- 积分 -->
                    <div class="user-info">
                        <div class="points-badge">
                            <i class="fa fa-coins" aria-hidden="true"></i>
                            <span>1280</span>
                        </div>
                    </div>
                </div>
                
                <!-- 移动端菜单按钮 -->
                <div class="md:hidden">
                    <button id="menuButton" class="text-dark focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fa fa-bars text-xl" aria-hidden="true"></i>
                    </button>
                </div>
            </nav>
            
            <!-- 移动端菜单内容 -->
            <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-200">
                <div class="container mx-auto px-4 py-2">
                    <a href="../论坛/forum.html" class="block px-4 py-2 text-dark hover:text-primary transition duration-300 ease-in-out">
                        <i class="fa fa-comments-o mr-2" aria-hidden="true"></i>论坛
                    </a>
                    <a href="index.html" class="block px-4 py-2 text-primary hover:text-primary transition duration-300 ease-in-out">
                        <i class="fa fa-calendar mr-2" aria-hidden="true"></i>活动
                    </a>
                    <a href="../注册与登录/登录.html" class="block px-4 py-2 text-dark hover:text-primary transition duration-300 ease-in-out">
                        <i class="fa fa-sign-in mr-2" aria-hidden="true"></i>登录
                    </a>
                    <a href="../注册与登录/用户信息.html" class="block px-4 py-2 text-dark hover:text-primary transition duration-300 ease-in-out">
                        <i class="fa fa-user mr-2" aria-hidden="true"></i>个人信息
                    </a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 主内容区域 -->
    <main class="flex-grow pt-24 pb-20 px-4 bg-gradient-to-b from-white via-white to-gray-50 bg-pattern">
        <!-- 页面标题 -->
        <div class="container mx-auto max-w-6xl">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-primary mb-4 tracking-wide text-shadow animate-fade-in-up">
                    活动中心
                </h1>
                <p class="text-lg text-gray-700 max-w-2xl mx-auto leading-relaxed animate-fade-in-up animate-delay-100">
                    探索我们丰富多彩的活动，参与其中，赢取积分奖励，结交志同道合的朋友。
                </p>
            </div>
            
            <!-- 活动筛选区域 -->
            <div class="mb-10 animate-fade-in-up animate-delay-200">
                <div class="flex flex-wrap gap-3 justify-center">
                    <button class="filter-tag active px-4 py-2 rounded-full bg-gray-100 text-gray-800 font-medium" data-filter="all">
                        全部活动
                    </button>
                    <button class="filter-tag px-4 py-2 rounded-full bg-gray-100 text-gray-800 font-medium" data-filter="upcoming">
                        即将开始
                    </button>
                    <button class="filter-tag px-4 py-2 rounded-full bg-gray-100 text-gray-800 font-medium" data-filter="ongoing">
                        进行中
                    </button>
                    <button class="filter-tag px-4 py-2 rounded-full bg-gray-100 text-gray-800 font-medium" data-filter="completed">
                        已结束
                    </button>
                    <button class="filter-tag px-4 py-2 rounded-full bg-gray-100 text-gray-800 font-medium" data-filter="registered">
                        我已报名
                    </button>
                </div>
            </div>
            
            <!-- 活动列表区域 -->
            <div id="activitiesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                <!-- 活动卡片将通过JavaScript动态加载 -->
            </div>
            
            <!-- 分页控件 -->
            <div class="flex justify-center items-center space-x-2 mb-12">
                <button id="prevPage" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-chevron-left mr-2"></i>上一页
                </button>
                <div id="pageNumbers" class="flex space-x-1">
                    <!-- 页码将通过JavaScript动态生成 -->
                </div>
                <button id="nextPage" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    下一页<i class="fa fa-chevron-right ml-2"></i>
                </button>
            </div>
        </div>
    </main>
    
    <!-- 活动详情模态框 -->
    <div id="activityModal" class="modal">
        <div class="bg-white rounded-xl shadow-card max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 id="modalTitle" class="text-2xl font-bold text-dark"></h2>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                
                <div id="modalContent">
                    <!-- 活动详情内容将通过JavaScript动态加载 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 活动报名模态框 -->
    <div id="registrationModal" class="modal">
        <div class="bg-white rounded-xl shadow-card max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold text-dark">活动报名</h2>
                    <button id="closeRegistrationModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="registrationForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2" for="registrationNotes">
                            备注（可选）
                        </label>
                        <textarea id="registrationNotes" class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none" rows="3" placeholder="请输入您的特殊需求或备注信息"></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelRegistration" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            确认报名
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 活动签到模态框 -->
    <div id="checkinModal" class="modal">
        <div class="bg-white rounded-xl shadow-card max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold text-dark">活动签到</h2>
                    <button id="closeCheckinModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="checkinForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2" for="checkinNotes">
                            签到备注（可选）
                        </label>
                        <textarea id="checkinNotes" class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none" rows="3" placeholder="请输入签到备注"></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelCheckin" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="checkin-button px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            确认签到
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 活动评价模态框 -->
    <div id="reviewModal" class="modal">
        <div class="bg-white rounded-xl shadow-card max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold text-dark">活动评价</h2>
                    <button id="closeReviewModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="reviewForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2">评分</label>
                        <div class="flex space-x-1 mb-2">
                            <i class="fa fa-star-o text-2xl text-gray-300 rating-star" data-rating="1"></i>
                            <i class="fa fa-star-o text-2xl text-gray-300 rating-star" data-rating="2"></i>
                            <i class="fa fa-star-o text-2xl text-gray-300 rating-star" data-rating="3"></i>
                            <i class="fa fa-star-o text-2xl text-gray-300 rating-star" data-rating="4"></i>
                            <i class="fa fa-star-o text-2xl text-gray-300 rating-star" data-rating="5"></i>
                        </div>
                        <input type="hidden" id="ratingValue" value="0">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-2" for="reviewContent">
                            评价内容
                        </label>
                        <textarea id="reviewContent" class="form-input w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none" rows="4" placeholder="请分享您对此次活动的感受和建议"></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="isAnonymous" class="mr-2">
                            <span class="text-gray-700">匿名评价</span>
                        </label>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelReview" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            提交评价
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 底部区域 -->
    <footer class="bg-gray-50 text-dark py-12 border-t border-gray-200">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                <div class="mb-6 md:mb-0 flex items-center gap-3">
                    <div class="logo-container">
                        <img src="data:image/png;base64,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" alt="RDFZ沙盒社Logo" class="h-8 w-8">
                    </div>
                    <span class="text-lg font-semibold">SandBox 沙盒社</span>
                </div>
                
                <div class="flex space-x-8">
                    <a href="../关于/about.html" class="text-dark hover:text-primary transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-user-circle-o mr-2" aria-hidden="true"></i>关于
                    </a>
                    <a href="https://afdian.com/a/rdfzsandbox_support" class="text-dark hover:text-primary transition duration-300 ease-in-out flex items-center">
                        <i class="fa fa-support mr-2" aria-hidden="true"></i>支持
                    </a>
                </div>
            </div>
            
            <!-- 社交媒体链接 -->
            <div class="mt-6 flex justify-center space-x-8">
                <a href="#" class="text-dark hover:text-primary transition duration-300 ease-in-out hover:scale-110">
                    <i class="fa fa-weixin text-2xl" aria-hidden="true"></i>
                </a>
                <a href="#" class="text-dark hover:text-primary transition duration-300 ease-in-out hover:scale-110">
                    <i class="fa fa-weibo text-2xl" aria-hidden="true"></i>
                </a>
                <a href="#" class="text-dark hover:text-primary transition duration-300 ease-in-out hover:scale-110">
                    <i class="fa fa-github text-2xl" aria-hidden="true"></i>
                </a>
                <a href="#" class="text-dark hover:text-primary transition duration-300 ease-in-out hover:scale-110">
                    <i class="fa fa-youtube-play text-2xl" aria-hidden="true"></i>
                </a>
            </div>
            
            <!-- 版权信息 -->
            <div class="mt-8 text-center text-gray-500">
                <p>&copy; 2025 人大附中沙盒社. 保留所有权利.</p>
                <p class="mt-2 text-sm">使用先进技术构建，为热爱游戏的你打造</p>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript交互 -->
    <script>
        // API基础URL
        const API_BASE_URL = '/api/v1';
        
        // 当前用户信息（模拟）
        const currentUser = {
            id: 2,
            username: 'user1',
            token: '模拟的JWT令牌'
        };
        
        // 当前活动筛选条件
        let currentFilter = 'all';
        
        // 当前页码
        let currentPage = 1;
        
        // 每页显示数量
        const pageSize = 6;
        
        // 总页数
        let totalPages = 1;
        
        // 当前选中的活动ID
        let currentActivityId = null;
        
        // 导航栏滚动效果
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // 移动端菜单切换
        const menuButton = document.getElementById('menuButton');
        const mobileMenu = document.getElementById('mobileMenu');
        
        if (menuButton && mobileMenu) {
            menuButton.addEventListener('click', function() {
                // 切换菜单显示/隐藏
                mobileMenu.classList.toggle('hidden');
                
                // 切换菜单图标
                const icon = this.querySelector('i');
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            });
        }
        
        // 点击移动端菜单项后自动关闭菜单
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', function() {
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                    const icon = menuButton.querySelector('i');
                    icon.classList.add('fa-bars');
                    icon.classList.remove('fa-times');
                }
            });
        });
        
        // 活动筛选功能
        document.querySelectorAll('.filter-tag').forEach(tag => {
            tag.addEventListener('click', function() {
                // 更新筛选状态
                document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // 更新当前筛选条件
                currentFilter = this.getAttribute('data-filter');
                
                // 重置页码
                currentPage = 1;
                
                // 重新加载活动列表
                loadActivities();
            });
        });
        
        // 加载活动列表
        async function loadActivities() {
            try {
                // 构建请求URL
                let url = `${API_BASE_URL}/activities?page=${currentPage}&pageSize=${pageSize}`;
                
                // 根据筛选条件添加参数
                if (currentFilter === 'upcoming') {
                    url += '&status=upcoming';
                } else if (currentFilter === 'ongoing') {
                    url += '&status=ongoing';
                } else if (currentFilter === 'completed') {
                    url += '&status=completed';
                } else if (currentFilter === 'registered') {
                    url += '&registered=true';
                }
                
                // 发送请求
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${currentUser.token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('获取活动列表失败');
                }
                
                const data = await response.json();
                
                // 更新总页数
                totalPages = data.data.pagination.totalPages;
                
                // 渲染活动列表
                renderActivities(data.data.list);
                
                // 更新分页控件
                updatePagination();
                
            } catch (error) {
                console.error('加载活动列表失败:', error);
                showToast('加载活动列表失败，请稍后重试', 'error');
            }
        }
        
        // 渲染活动列表
        function renderActivities(activities) {
            const activitiesList = document.getElementById('activitiesList');
            
            // 清空现有内容
            activitiesList.innerHTML = '';
            
            // 如果没有活动，显示提示信息
            if (activities.length === 0) {
                activitiesList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-calendar-times-o text-5xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500 text-lg">暂无符合条件的活动</p>
                    </div>
                `;
                return;
            }
            
            // 渲染每个活动卡片
            activities.forEach(activity => {
                const activityCard = createActivityCard(activity);
                activitiesList.appendChild(activityCard);
            });
        }
        
        // 创建活动卡片
        function createActivityCard(activity) {
            const card = document.createElement('div');
            card.className = 'activity-card bg-white rounded-xl shadow-card overflow-hidden';
            
            // 根据活动状态设置状态标签样式
            let statusClass = '';
            let statusText = '';
            
            switch (activity.status) {
                case 'upcoming':
                    statusClass = 'status-upcoming';
                    statusText = '即将开始';
                    break;
                case 'ongoing':
                    statusClass = 'status-ongoing';
                    statusText = '进行中';
                    break;
                case 'completed':
                    statusClass = 'status-completed';
                    statusText = '已结束';
                    break;
                case 'cancelled':
                    statusClass = 'status-cancelled';
                    statusText = '已取消';
                    break;
                default:
                    statusClass = 'status-upcoming';
                    statusText = '即将开始';
            }
            
            // 格式化日期
            const startDate = new Date(activity.startTime).toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const endDate = new Date(activity.endTime).toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // 设置卡片内容
            card.innerHTML = `
                <div class="h-48 bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center">
                    <i class="fa fa-calendar-check-o text-6xl text-primary"></i>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-bold text-dark">${activity.title}</h3>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-500 mb-3">
                        <i class="fa fa-clock-o mr-2"></i>
                        <span>${startDate} - ${endDate}</span>
                    </div>
                    <div class="flex items-center text-sm text-gray-500 mb-3">
                        <i class="fa fa-map-marker mr-2"></i>
                        <span>${activity.location || '线上活动'}</span>
                    </div>
                    <p class="text-gray-600 mb-4 line-clamp-2">${activity.description}</p>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fa fa-users mr-2"></i>
                            <span>${activity.currentParticipants || 0}/${activity.maxParticipants || '不限'}</span>
                        </div>
                        <button class="view-activity-btn text-primary hover:text-primary/80 font-medium flex items-center" data-id="${activity.id}">
                            查看详情 <i class="fa fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // 添加查看详情按钮点击事件
            const viewButton = card.querySelector('.view-activity-btn');
            viewButton.addEventListener('click', function() {
                const activityId = this.getAttribute('data-id');
                showActivityDetails(activityId);
            });
            
            return card;
        }
        
        // 显示活动详情
        async function showActivityDetails(activityId) {
            try {
                // 发送请求获取活动详情
                const response = await fetch(`${API_BASE_URL}/activities/${activityId}`, {
                    headers: {
                        'Authorization': `Bearer ${currentUser.token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('获取活动详情失败');
                }
                
                const data = await response.json();
                const activity = data.data;
                
                // 设置当前活动ID
                currentActivityId = activityId;
                
                // 更新模态框标题
                document.getElementById('modalTitle').textContent = activity.title;
                
                // 根据活动状态设置状态标签样式
                let statusClass = '';
                let statusText = '';
                
                switch (activity.status) {
                    case 'upcoming':
                        statusClass = 'status-upcoming';
                        statusText = '即将开始';
                        break;
                    case 'ongoing':
                        statusClass = 'status-ongoing';
                        statusText = '进行中';
                        break;
                    case 'completed':
                        statusClass = 'status-completed';
                        statusText = '已结束';
                        break;
                    case 'cancelled':
                        statusClass = 'status-cancelled';
                        statusText = '已取消';
                        break;
                    default:
                        statusClass = 'status-upcoming';
                        statusText = '即将开始';
                }
                
                // 格式化日期
                const startDate = new Date(activity.startTime).toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const endDate = new Date(activity.endTime).toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                // 构建操作按钮
                let actionButtons = '';
                
                if (activity.status === 'upcoming' && !activity.isRegistered) {
                    actionButtons = `
                        <button id="registerActivityBtn" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            <i class="fa fa-plus-circle mr-2"></i>报名参加
                        </button>
                    `;
                } else if (activity.status === 'upcoming' && activity.isRegistered) {
                    actionButtons = `
                        <button id="unregisterActivityBtn" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors">
                            <i class="fa fa-minus-circle mr-2"></i>取消报名
                        </button>
                    `;
                } else if (activity.status === 'ongoing' && activity.isRegistered && !activity.hasCheckedIn) {
                    actionButtons = `
                        <button id="checkinActivityBtn" class="checkin-button px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            <i class="fa fa-check-circle mr-2"></i>活动签到
                        </button>
                    `;
                } else if (activity.status === 'completed' && activity.isRegistered && !activity.hasReviewed) {
                    actionButtons = `
                        <button id="reviewActivityBtn" class="px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-green-600 transition-colors">
                            <i class="fa fa-star mr-2"></i>评价活动
                        </button>
                    `;
                }
                
                // 更新模态框内容
                document.getElementById('modalContent').innerHTML = `
                    <div class="mb-6">
                        <div class="flex justify-between items-start mb-4">
                            <span class="status-badge ${statusClass}">${statusText}</span>
                            <div class="flex items-center text-sm text-gray-500">
                                <i class="fa fa-users mr-2"></i>
                                <span>${activity.currentParticipants || 0}/${activity.maxParticipants || '不限'}</span>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="flex items-center text-gray-600">
                                <i class="fa fa-clock-o mr-3 text-primary"></i>
                                <div>
                                    <p class="font-medium">开始时间</p>
                                    <p class="text-sm">${startDate}</p>
                                </div>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fa fa-clock-o mr-3 text-primary"></i>
                                <div>
                                    <p class="font-medium">结束时间</p>
                                    <p class="text-sm">${endDate}</p>
                                </div>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fa fa-map-marker mr-3 text-primary"></i>
                                <div>
                                    <p class="font-medium">活动地点</p>
                                    <p class="text-sm">${activity.location || '线上活动'}</p>
                                </div>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fa fa-coins mr-3 text-primary"></i>
                                <div>
                                    <p class="font-medium">活动积分</p>
                                    <p class="text-sm">${activity.points || 0} 积分</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3 text-dark">活动详情</h3>
                            <div class="text-gray-600 whitespace-pre-line">${activity.description || '暂无详细描述'}</div>
                        </div>
                        
                        ${activity.requirements ? `
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3 text-dark">参与要求</h3>
                            <div class="text-gray-600 whitespace-pre-line">${activity.requirements}</div>
                        </div>
                        ` : ''}
                        
                        ${activity.agenda ? `
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3 text-dark">活动议程</h3>
                            <div class="text-gray-600 whitespace-pre-line">${activity.agenda}</div>
                        </div>
                        ` : ''}
                        
                        ${activity.contactInfo ? `
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3 text-dark">联系方式</h3>
                            <div class="text-gray-600">${activity.contactInfo}</div>
                        </div>
                        ` : ''}
                        
                        ${activity.images && activity.images.length > 0 ? `
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3 text-dark">活动图片</h3>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                ${activity.images.map(img => `
                                    <img src="${img}" alt="活动图片" class="w-full h-32 object-cover rounded-lg">
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        
                        <div class="flex justify-end space-x-3">
                            ${actionButtons}
                        </div>
                    </div>
                `;
                
                // 显示模态框
                document.getElementById('activityModal').classList.add('active');
                
                // 添加操作按钮事件监听
                const registerBtn = document.getElementById('registerActivityBtn');
                if (registerBtn) {
                    registerBtn.addEventListener('click', showRegistrationModal);
                }
                
                const unregisterBtn = document.getElementById('unregisterActivityBtn');
                if (unregisterBtn) {
                    unregisterBtn.addEventListener('click', unregisterActivity);
                }
                
                const checkinBtn = document.getElementById('checkinActivityBtn');
                if (checkinBtn) {
                    checkinBtn.addEventListener('click', showCheckinModal);
                }
                
                const reviewBtn = document.getElementById('reviewActivityBtn');
                if (reviewBtn) {
                    reviewBtn.addEventListener('click', showReviewModal);
                }
                
            } catch (error) {
                console.error('获取活动详情失败:', error);
                showToast('获取活动详情失败，请稍后重试', 'error');
            }
        }
        
        // 关闭活动详情模态框
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('activityModal').classList.remove('active');
        });
        
        // 显示活动报名模态框
        function showRegistrationModal() {
            document.getElementById('activityModal').classList.remove('active');
            document.getElementById('registrationModal').classList.add('active');
            document.getElementById('registrationNotes').value = '';
        }
        
        // 关闭活动报名模态框
        document.getElementById('closeRegistrationModal').addEventListener('click', function() {
            document.getElementById('registrationModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        document.getElementById('cancelRegistration').addEventListener('click', function() {
            document.getElementById('registrationModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        // 提交活动报名
        document.getElementById('registrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const notes = document.getElementById('registrationNotes').value;
                
                // 发送报名请求
                const response = await fetch(`${API_BASE_URL}/activities/${currentActivityId}/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${currentUser.token}`
                    },
                    body: JSON.stringify({
                        notes: notes
                    })
                });
                
                if (!response.ok) {
                    throw new Error('报名失败');
                }
                
                const data = await response.json();
                
                // 关闭模态框
                document.getElementById('registrationModal').classList.remove('active');
                
                // 显示成功提示
                showToast(data.message || '报名成功', 'success');
                
                // 重新加载活动列表
                loadActivities();
                
            } catch (error) {
                console.error('报名失败:', error);
                showToast('报名失败，请稍后重试', 'error');
            }
        });
        
        // 取消活动报名
        async function unregisterActivity() {
            try {
                // 发送取消报名请求
                const response = await fetch(`${API_BASE_URL}/activities/${currentActivityId}/unregister`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${currentUser.token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error('取消报名失败');
                }
                
                const data = await response.json();
                
                // 关闭模态框
                document.getElementById('activityModal').classList.remove('active');
                
                // 显示成功提示
                showToast(data.message || '取消报名成功', 'success');
                
                // 重新加载活动列表
                loadActivities();
                
            } catch (error) {
                console.error('取消报名失败:', error);
                showToast('取消报名失败，请稍后重试', 'error');
            }
        }
        
        // 显示活动签到模态框
        function showCheckinModal() {
            document.getElementById('activityModal').classList.remove('active');
            document.getElementById('checkinModal').classList.add('active');
            document.getElementById('checkinNotes').value = '';
        }
        
        // 关闭活动签到模态框
        document.getElementById('closeCheckinModal').addEventListener('click', function() {
            document.getElementById('checkinModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        document.getElementById('cancelCheckin').addEventListener('click', function() {
            document.getElementById('checkinModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        // 提交活动签到
        document.getElementById('checkinForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const notes = document.getElementById('checkinNotes').value;
                
                // 发送签到请求
                const response = await fetch(`${API_BASE_URL}/activities/${currentActivityId}/checkin`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${currentUser.token}`
                    },
                    body: JSON.stringify({
                        notes: notes
                    })
                });
                
                if (!response.ok) {
                    throw new Error('签到失败');
                }
                
                const data = await response.json();
                
                // 关闭模态框
                document.getElementById('checkinModal').classList.remove('active');
                
                // 显示成功提示
                showToast(data.message || '签到成功', 'success');
                
                // 重新加载活动列表
                loadActivities();
                
            } catch (error) {
                console.error('签到失败:', error);
                showToast('签到失败，请稍后重试', 'error');
            }
        });
        
        // 显示活动评价模态框
        function showReviewModal() {
            document.getElementById('activityModal').classList.remove('active');
            document.getElementById('reviewModal').classList.add('active');
            
            // 重置表单
            document.getElementById('reviewContent').value = '';
            document.getElementById('isAnonymous').checked = false;
            document.getElementById('ratingValue').value = '0';
            
            // 重置星级评分
            document.querySelectorAll('.rating-star').forEach(star => {
                star.classList.remove('fa-star');
                star.classList.add('fa-star-o');
            });
        }
        
        // 关闭活动评价模态框
        document.getElementById('closeReviewModal').addEventListener('click', function() {
            document.getElementById('reviewModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        document.getElementById('cancelReview').addEventListener('click', function() {
            document.getElementById('reviewModal').classList.remove('active');
            document.getElementById('activityModal').classList.add('active');
        });
        
        // 星级评分交互
        document.querySelectorAll('.rating-star').forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                document.getElementById('ratingValue').value = rating;
                
                // 更新星级显示
                document.querySelectorAll('.rating-star').forEach((s, index) => {
                    if (index < rating) {
                        s.classList.remove('fa-star-o');
                        s.classList.add('fa-star');
                        s.classList.add('active');
                    } else {
                        s.classList.remove('fa-star');
                        s.classList.add('fa-star-o');
                        s.classList.remove('active');
                    }
                });
            });
            
            star.addEventListener('mouseenter', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                
                // 临时更新星级显示
                document.querySelectorAll('.rating-star').forEach((s, index) => {
                    if (index < rating) {
                        s.classList.remove('fa-star-o');
                        s.classList.add('fa-star');
                    } else {
                        s.classList.remove('fa-star');
                        s.classList.add('fa-star-o');
                    }
                });
            });
        });
        
        document.querySelector('#reviewForm .flex.space-x-1').addEventListener('mouseleave', function() {
            const rating = parseInt(document.getElementById('ratingValue').value);
            
            // 恢复星级显示
            document.querySelectorAll('.rating-star').forEach((s, index) => {
                if (index < rating) {
                    s.classList.remove('fa-star-o');
                    s.classList.add('fa-star');
                } else {
                    s.classList.remove('fa-star');
                    s.classList.add('fa-star-o');
                }
            });
        });
        
        // 提交活动评价
        document.getElementById('reviewForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                const rating = parseInt(document.getElementById('ratingValue').value);
                const content = document.getElementById('reviewContent').value;
                const isAnonymous = document.getElementById('isAnonymous').checked;
                
                if (rating === 0) {
                    showToast('请选择评分', 'warning');
                    return;
                }
                
                if (!content.trim()) {
                    showToast('请输入评价内容', 'warning');
                    return;
                }
                
                // 发送评价请求
                const response = await fetch(`${API_BASE_URL}/activities/${currentActivityId}/reviews`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${currentUser.token}`
                    },
                    body: JSON.stringify({
                        rating: rating,
                        content: content,
                        isAnonymous: isAnonymous
                    })
                });
                
                if (!response.ok) {
                    throw new Error('评价失败');
                }
                
                const data = await response.json();
                
                // 关闭模态框
                document.getElementById('reviewModal').classList.remove('active');
                
                // 显示成功提示
                showToast(data.message || '评价成功', 'success');
                
                // 重新加载活动列表
                loadActivities();
                
            } catch (error) {
                console.error('评价失败:', error);
                showToast('评价失败，请稍后重试', 'error');
            }
        });
        
        // 更新分页控件
        function updatePagination() {
            const pageNumbers = document.getElementById('pageNumbers');
            const prevButton = document.getElementById('prevPage');
            const nextButton = document.getElementById('nextPage');
            
            // 清空现有页码
            pageNumbers.innerHTML = '';
            
            // 生成页码按钮
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.className = `px-3 py-1 rounded-lg ${i === currentPage ? 'bg-primary text-white' : 'bg-gray-100 text-gray-800'} font-medium hover:bg-gray-200 transition-colors`;
                pageButton.textContent = i;
                pageButton.addEventListener('click', function() {
                    currentPage = i;
                    loadActivities();
                });
                pageNumbers.appendChild(pageButton);
            }
            
            // 更新上一页按钮状态
            prevButton.disabled = currentPage === 1;
            
            // 更新下一页按钮状态
            nextButton.disabled = currentPage === totalPages;
        }
        
        // 上一页按钮点击事件
        document.getElementById('prevPage').addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                loadActivities();
            }
        });
        
        // 下一页按钮点击事件
        document.getElementById('nextPage').addEventListener('click', function() {
            if (currentPage < totalPages) {
                currentPage++;
                loadActivities();
            }
        });
        
        // 显示提示消息
        function showToast(message, type = 'info') {
            // 创建提示元素
            const toast = document.createElement('div');
            toast.className = `fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg text-white z-50 transition-all duration-300 transform translate-x-full`;
            
            // 根据类型设置背景色
            switch (type) {
                case 'success':
                    toast.classList.add('bg-green-500');
                    break;
                case 'error':
                    toast.classList.add('bg-red-500');
                    break;
                case 'warning':
                    toast.classList.add('bg-yellow-500');
                    break;
                default:
                    toast.classList.add('bg-blue-500');
            }
            
            // 设置提示内容
            toast.textContent = message;
            
            // 添加到页面
            document.body.appendChild(toast);
            
            // 显示提示
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 10);
            
            // 3秒后隐藏提示
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 加载活动列表
            loadActivities();
        });
    </script>
</body>
</html>